<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Cabin — Beneath Me: Fork</title>
  <style>
    :root {
      --bg: #000000;
      --text: #f2f2f2;
      --muted: #b5b5b5;
      --dim: #8d8d8d;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: "Iowan Old Style", "Palatino Linotype", Palatino, "Times New Roman", serif;
      line-height: 1.7;
      letter-spacing: 0.01em;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.9) 65%),
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 400' preserveAspectRatio='none'><path d='M0 320 L60 270 L120 310 L180 260 L240 320 L300 250 L360 310 L420 260 L480 320 L540 250 L600 310 L660 260 L720 320 L780 255 L840 310 L900 260 L960 320 L1020 250 L1080 315 L1140 260 L1200 320 L1260 250 L1320 310 L1380 260 L1440 320 L1500 270 L1560 320 L1600 300 L1600 400 L0 400 Z' fill='%23070707'/></svg>");
      background-repeat: no-repeat;
      background-size: cover;
      background-position: bottom center;
      opacity: 0.55;
      pointer-events: none;
      z-index: 0;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='180' height='180'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.12'/></svg>");
      opacity: 0.03;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: 0;
    }

    .page {
      position: relative;
      z-index: 1;
      max-width: 900px;
      margin: 0 auto;
      padding: 10vh 7vw 12vh;
    }

    header {
      margin-bottom: 6vh;
    }

    h1 {
      margin: 0 0 0.2em 0;
      font-size: clamp(2.6rem, 6vw, 4.5rem);
      font-weight: 500;
      letter-spacing: 0.08em;
    }

    .subtitle {
      margin: 0 0 2em 0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.7rem;
      color: var(--muted);
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    nav {
      display: flex;
      gap: 1.4rem;
      flex-wrap: wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    nav a {
      color: var(--dim);
      text-decoration: none;
      border-bottom: 1px solid transparent;
      padding-bottom: 0.15em;
      transition: border-color 0.2s ease, color 0.2s ease;
    }

    nav a:hover,
    nav a:focus {
      color: var(--text);
      border-color: var(--text);
    }

    .story {
      max-width: 720px;
      font-size: 1.05rem;
      color: #e6e6e6;
    }

    .story p {
      margin: 0;
      text-indent: 1.6em;
    }

    .story p:first-child,
    .story p.chapter {
      text-indent: 0;
    }

    .story p.chapter {
      margin-top: 1.6em;
      font-variant: small-caps;
      letter-spacing: 0.08em;
      color: var(--muted);
    }

    .fallback {
      color: var(--muted);
    }

    .back-link {
      margin-top: 3vh;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    .back-link a {
      color: var(--dim);
      text-decoration: none;
      border-bottom: 1px solid transparent;
      padding-bottom: 0.15em;
      transition: border-color 0.2s ease, color 0.2s ease;
    }

    .back-link a:hover,
    .back-link a:focus {
      color: var(--text);
      border-color: var(--text);
    }

    @media (max-width: 600px) {
      .page {
        padding-top: 9vh;
      }

      .story {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>The Cabin</h1>
      <p class="subtitle">Beneath Me — Fork</p>
      <nav>
        <a href="index.html">Home</a>
        <a href="game.html">Game</a>
        <a href="stories.html">Stories</a>
        <a href="https://github.com/amomand/the-cabin">Repository</a>
      </nav>
    </header>

    <article id="story-content" class="story">
      <p class="fallback">Loading text...</p>
    </article>
    <div class="back-link">
      <a href="stories.html">Back to Stories</a>
    </div>
  </div>

  <script>
    (() => {
      const target = document.getElementById("story-content");
      const escapeHtml = (value) =>
        value.replace(/[&<>"']/g, (ch) => ({
          "&": "&amp;",
          "<": "&lt;",
          ">": "&gt;",
          "\"": "&quot;",
          "'": "&#39;",
        }[ch]));

      fetch("fork.md")
        .then((response) => response.text())
        .then((text) => {
          const trimmed = text.trim();
          if (!trimmed) {
            target.innerHTML = "<p>Text unavailable.</p>";
            return;
          }
          const paragraphs = trimmed
            .split(/\n\s*\n/)
            .map((block) => block.replace(/\n+/g, " ").trim())
            .filter(Boolean);
          target.innerHTML = paragraphs
            .map((paragraph, index) => {
              const cls = /^\d+\.\s/.test(paragraph) ? "chapter" : "";
              return `<p${cls ? ` class="${cls}"` : ""}>${escapeHtml(paragraph)}</p>`;
            })
            .join("");
        })
        .catch(() => {
          target.innerHTML = "<p>Text unavailable.</p>";
        });
    })();
  </script>
</body>
</html>
